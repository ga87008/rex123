<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>å¤©çˆ¶çš„è©±</title>
  <meta name="description" content="æ¯æ—¥é ˜å—å¤©çˆ¶çš„è©±èª,é€éè–ç¶“ç¶“æ–‡æ„Ÿå—ç¥çš„æ„›èˆ‡å¼•å°">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Iansui&family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">
  <style>
    :root {
      /* äº®è‰²æ¨¡å¼é…è‰² */
      --bg-gradient-start: #ffecd2;
      --bg-gradient-end: #fcb69f;
      --card-bg: rgba(255, 255, 255, 0.95);
      --card-shadow: rgba(0, 0, 0, 0.1);
      --text-primary: #2c3e50;
      --text-secondary: #555;
      --text-reference: #7f8c8d;
      --accent-gold: #d4af37;
      --accent-purple: #9b59b6;
      --button-bg: #f0f0f0;
      --button-hover: #e0e0e0;
      --button-text: #333;
      --nfc-bg: rgba(0, 0, 0, 0.92);
      --loader-text: #666;
    }

    /* æ·±è‰²æ¨¡å¼é…è‰² */
    @media (prefers-color-scheme: dark) {
      :root {
        --bg-gradient-start: #1a1a2e;
        --bg-gradient-end: #16213e;
        --card-bg: rgba(30, 30, 46, 0.95);
        --card-shadow: rgba(0, 0, 0, 0.5);
        --text-primary: #e0e0e0;
        --text-secondary: #b0b0b0;
        --text-reference: #9ca3af;
        --accent-gold: #f4d03f;
        --accent-purple: #bb86fc;
        --button-bg: #374151;
        --button-hover: #4b5563;
        --button-text: #e5e7eb;
        --nfc-bg: rgba(0, 0, 0, 0.95);
        --loader-text: #9ca3af;
      }
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: "Noto Sans TC", sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      background: linear-gradient(135deg, var(--bg-gradient-start) 0%, var(--bg-gradient-end) 100%);
      background-attachment: fixed;
      padding: 20px;
      position: relative;
      overflow-x: hidden;
    }

    /* èƒŒæ™¯å‹•ç•«å…‰æšˆ */
    body::before {
      content: '';
      position: fixed;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, var(--accent-gold) 0%, transparent 70%);
      opacity: 0.1;
      animation: rotate 30s linear infinite;
      pointer-events: none;
    }

    @keyframes rotate {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    .verse-box {
      background: var(--card-bg);
      backdrop-filter: blur(20px) saturate(180%);
      -webkit-backdrop-filter: blur(20px) saturate(180%);
      border-radius: 24px;
      padding: 40px 32px;
      max-width: 90%;
      width: 650px;
      text-align: center;
      box-shadow: 
        0 8px 32px var(--card-shadow),
        0 0 0 1px rgba(255, 255, 255, 0.1) inset;
      display: none;
      position: relative;
      transform: translateY(20px);
      opacity: 0;
      animation: slideUp 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards;
    }

    @keyframes slideUp {
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }

    /* å¡ç‰‡é ‚éƒ¨è£é£¾ */
    .verse-box::before {
      content: 'âœ¦';
      position: absolute;
      top: -15px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 30px;
      color: var(--accent-gold);
      text-shadow: 0 0 20px var(--accent-gold);
      animation: glow 2s ease-in-out infinite;
    }

    @keyframes glow {
      0%, 100% { opacity: 0.6; }
      50% { opacity: 1; }
    }

    .verse {
      font-family: 'Iansui', 'Noto Sans TC', serif;
      font-size: 1.5rem;
      line-height: 2;
      color: var(--text-primary);
      margin-bottom: 30px;
      position: relative;
      text-align: left;
      white-space: pre-line;
      font-weight: 400;
    }

    .verse .salutation {
      display: block;
      margin-bottom: 1em;
      text-align: left;
      font-weight: 500;
      color: var(--accent-purple);
    }

    .verse .content {
      display: block;
      padding-left: 0;
      text-indent: 2em;
      margin-left: 0;
    }

    .verse span.char {
      display: inline-block;
      opacity: 0;
      transform: translateY(10px);
      background: linear-gradient(to bottom, var(--text-primary), var(--text-secondary));
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
      filter: drop-shadow(0 1px 2px rgba(0,0,0,0.1));
    }

    @keyframes penStroke {
      0% { 
        opacity: 0;
        transform: translateY(10px) scaleY(0.8);
      }
      50% {
        opacity: 0.7;
        transform: translateY(0) scaleY(1.05);
      }
      100% {
        opacity: 1;
        transform: translateY(0) scaleY(1);
      }
    }

    .reference {
      font-size: 1.15rem;
      color: var(--text-reference);
      font-style: italic;
      margin-top: 30px;
      margin-bottom: 25px;
      opacity: 0;
      animation: fadeIn 0.6s ease-out forwards;
      text-align: center;
      font-weight: 500;
      letter-spacing: 0.5px;
    }

    @keyframes fadeIn {
      to { opacity: 1; }
    }

    .loader {
      font-size: 1.3rem;
      color: var(--loader-text);
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 20px;
    }

    .loader::after {
      content: '';
      width: 50px;
      height: 50px;
      border: 4px solid rgba(212, 175, 55, 0.2);
      border-top-color: var(--accent-gold);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    .share-buttons {
      margin-top: 25px;
      display: flex;
      justify-content: center;
      gap: 12px;
      flex-wrap: wrap;
      opacity: 0;
      animation: fadeIn 0.6s ease-out forwards;
    }

    .share-buttons a,
    .share-buttons button {
      background: var(--button-bg);
      color: var(--button-text);
      padding: 12px 20px;
      border-radius: 12px;
      text-decoration: none;
      font-weight: 600;
      font-size: 0.95rem;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      border: none;
      cursor: pointer;
      font-family: inherit;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
      position: relative;
      overflow: hidden;
    }

    .share-buttons a::before,
    .share-buttons button::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.3);
      transform: translate(-50%, -50%);
      transition: width 0.6s, height 0.6s;
    }

    .share-buttons a:hover::before,
    .share-buttons button:hover::before {
      width: 300px;
      height: 300px;
    }

    .share-buttons a:hover,
    .share-buttons button:hover {
      background: var(--button-hover);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }

    .share-buttons a:active,
    .share-buttons button:active {
      transform: translateY(0);
    }

    /* è¤‡è£½æˆåŠŸæç¤º */
    .copy-toast {
      position: fixed;
      bottom: 30px;
      left: 50%;
      transform: translateX(-50%) translateY(100px);
      background: var(--accent-gold);
      color: #1a1a1a;
      padding: 12px 24px;
      border-radius: 12px;
      font-weight: 600;
      box-shadow: 0 4px 20px rgba(212, 175, 55, 0.4);
      opacity: 0;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      z-index: 1000;
      pointer-events: none;
    }

    .copy-toast.show {
      opacity: 1;
      transform: translateX(-50%) translateY(0);
    }

    /* NFC æƒæé¢æ¿ */
    .nfc-panel {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: var(--nfc-bg);
      backdrop-filter: blur(10px);
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }

    .nfc-animation {
      position: relative;
      width: 200px;
      height: 200px;
      margin-bottom: 30px;
    }

    .nfc-waves {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }

    .nfc-wave {
      position: absolute;
      top: 50%;
      left: 50%;
      width: 100px;
      height: 100px;
      border: 3px solid var(--accent-gold);
      border-radius: 50%;
      transform: translate(-50%, -50%);
      opacity: 0;
      animation: wave 2s ease-out infinite;
    }

    .nfc-wave:nth-child(2) {
      animation-delay: 0.5s;
    }

    .nfc-wave:nth-child(3) {
      animation-delay: 1s;
    }

    @keyframes wave {
      0% {
        width: 100px;
        height: 100px;
        opacity: 1;
      }
      100% {
        width: 200px;
        height: 200px;
        opacity: 0;
      }
    }

    .nfc-phone {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 80px;
      height: 120px;
      background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="%23ffffff" d="M17 1H7c-1.1 0-2 .9-2 2v18c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-2-2-2zm0 18H7V5h10v14z"/></svg>') no-repeat center;
      animation: float 2s ease-in-out infinite;
      z-index: 2;
    }

    @keyframes float {
      0%, 100% { transform: translate(-50%, -50%); }
      50% { transform: translate(-50%, -55%); }
    }

    .nfc-panel p {
      color: white;
      font-size: 1.3rem;
      margin-top: 20px;
      font-weight: 500;
      letter-spacing: 1px;
    }

    .nfc-error {
      color: #ff6b6b;
      margin-top: 20px;
      text-align: center;
      font-size: 1.1rem;
    }

    #skipNfc {
      margin-top: 30px;
      background: rgba(255, 255, 255, 0.1);
      border: 2px solid rgba(255, 255, 255, 0.3);
      color: white;
      text-decoration: none;
      font-size: 1.05rem;
      cursor: pointer;
      padding: 12px 24px;
      border-radius: 12px;
      transition: all 0.3s;
      font-weight: 600;
      backdrop-filter: blur(10px);
    }

    #skipNfc:hover {
      background: rgba(255, 255, 255, 0.2);
      border-color: rgba(255, 255, 255, 0.5);
      transform: translateY(-2px);
    }

    /* éŸ¿æ‡‰å¼è¨­è¨ˆ */
    @media (max-width: 768px) {
      .verse-box {
        padding: 30px 24px;
        width: 95%;
      }

      .verse {
        font-size: 1.3rem;
        line-height: 1.9;
      }

      .reference {
        font-size: 1rem;
      }

      .share-buttons {
        gap: 10px;
      }

      .share-buttons a,
      .share-buttons button {
        padding: 10px 16px;
        font-size: 0.9rem;
      }
    }

    @media (max-width: 480px) {
      body {
        padding: 15px;
      }

      .verse-box {
        padding: 25px 20px;
        border-radius: 20px;
      }

      .verse {
        font-size: 1.2rem;
        line-height: 1.8;
      }

      .verse .content {
        text-indent: 1.5em;
      }

      .reference {
        font-size: 0.95rem;
        margin-top: 25px;
      }

      .share-buttons {
        flex-direction: column;
        width: 100%;
      }

      .share-buttons a,
      .share-buttons button {
        width: 100%;
      }

      .loader {
        font-size: 1.1rem;
      }

      .nfc-panel p {
        font-size: 1.1rem;
        padding: 0 20px;
      }
    }

    /* æ‰“å°æ¨£å¼ */
    @media print {
      body {
        background: white;
      }

      .verse-box {
        box-shadow: none;
        background: white;
      }

      .share-buttons,
      .loader,
      .nfc-panel {
        display: none !important;
      }
    }
  </style>
</head>
<body>
  <!-- NFC æƒæé¢æ¿ (åƒ… Android é¡¯ç¤º) -->
  <div class="nfc-panel" id="nfcPanel">
    <div class="nfc-animation">
      <div class="nfc-waves">
        <div class="nfc-wave"></div>
        <div class="nfc-wave"></div>
        <div class="nfc-wave"></div>
      </div>
      <div class="nfc-phone"></div>
    </div>
    <p>è«‹å°‡æ‰‹æ©Ÿé è¿‘ NFC æ¨™ç±¤</p>
    <p class="nfc-error" id="nfcError"></p>
    <button id="skipNfc">ç›´æ¥é¡¯ç¤ºç¶“æ–‡</button>
  </div>

  <!-- ç¶“æ–‡é¡¯ç¤ºå€ -->
  <div class="verse-box" id="verseBox">
    <div id="verse" class="verse"></div>
    <div id="reference" class="reference"></div>
    <div class="share-buttons">
      <a href="#" id="share-line" target="_blank" rel="noopener">ğŸ“± åˆ†äº«åˆ° LINE</a>
      <a href="#" id="share-fb" target="_blank" rel="noopener">ğŸ“˜ åˆ†äº«åˆ° Facebook</a>
      <button id="copy-btn">ğŸ“‹ è¤‡è£½ç¶“æ–‡</button>
    </div>
  </div>

  <!-- è¼‰å…¥æŒ‡ç¤ºå™¨ -->
  <div id="loader" class="loader">è¼‰å…¥ä¸­...</div>

  <!-- è¤‡è£½æˆåŠŸæç¤º -->
  <div class="copy-toast" id="copyToast">âœ“ å·²è¤‡è£½åˆ°å‰ªè²¼æ¿</div>

  <script type="module">
    // å°å…¥ç¶“æ–‡è³‡æ–™
    import verses from './verses.js';
    
    document.addEventListener('DOMContentLoaded', function() {
      const nfcPanel = document.getElementById('nfcPanel');
      const nfcError = document.getElementById('nfcError');
      const verseBox = document.getElementById('verseBox');
      const loader = document.getElementById('loader');
      const skipNfcBtn = document.getElementById('skipNfc');
      const copyBtn = document.getElementById('copy-btn');
      const copyToast = document.getElementById('copyToast');
      const isAndroid = /Android/i.test(navigator.userAgent);

      // ========== è¨­å‚™æŒ‡ç´‹ç”Ÿæˆ ==========
      function getDeviceFingerprint() {
        const keys = [
          navigator.platform,
          navigator.hardwareConcurrency || 4,
          screen.width + 'x' + screen.height,
          screen.colorDepth,
          navigator.language,
          new Date().getTimezoneOffset(),
          navigator.deviceMemory || 4
        ];
        
        let hash = 0;
        const str = keys.join('|');
        for (let i = 0; i < str.length; i++) {
          const char = str.charCodeAt(i);
          hash = ((hash << 5) - hash) + char;
          hash = hash & hash; // Convert to 32bit integer
        }
        return Math.abs(hash).toString(36).slice(0, 10);
      }

      // ========== ç”Ÿæˆä»Šæ—¥å”¯ä¸€ç´¢å¼• ==========
      function getDailyIndex() {
        const today = new Date();
        const dateSeed = [
          today.getFullYear(),
          String(today.getMonth() + 1).padStart(2, '0'),
          String(today.getDate()).padStart(2, '0')
        ].join('');
        
        const deviceId = getDeviceFingerprint();
        const seed = deviceId + dateSeed;
        
        let index = 0;
        for (let i = 0; i < seed.length; i++) {
          index = ((index << 5) - index) + seed.charCodeAt(i);
          index = index & index;
        }
        
        return Math.abs(index) % verses.length;
      }

      // ========== æ›¸ä¿¡å¼æ’ç‰ˆè™•ç† ==========
      function formatLetterText(text) {
        let salutation = '';
        let content = text;
        
        // æª¢æ¸¬ä¸¦æå–ç¨±å‘¼
        const greetings = ['è¦ªæ„›çš„å­©å­ï¼Œ', 'è¦ªæ„›çš„å­©å­ï¼š', 'å­©å­ï¼Œ', 'å­©å­ï¼š'];
        for (const greeting of greetings) {
          if (text.startsWith(greeting)) {
            salutation = greeting.endsWith('ï¼š') ? greeting : greeting.slice(0, -1) + 'ï¼š';
            content = text.slice(greeting.length);
            break;
          }
        }
        
        return { salutation, content };
      }

      // ========== é‹¼ç­†é€å­—å‹•ç•« ==========
      function animateLetterWriting(element, text) {
        element.innerHTML = '';
        
        const formatted = formatLetterText(text);
        let totalDelay = 0;
        
        // é¡¯ç¤ºç¨±å‘¼
        if (formatted.salutation) {
          const salutationDiv = document.createElement('div');
          salutationDiv.className = 'salutation';
          element.appendChild(salutationDiv);
          
          formatted.salutation.split('').forEach((char, index) => {
            const span = document.createElement('span');
            span.className = 'char';
            span.textContent = char;
            salutationDiv.appendChild(span);
            
            setTimeout(() => {
              span.style.animation = 'penStroke 0.4s cubic-bezier(0.22, 1, 0.36, 1) forwards';
            }, index * 120);
          });
          
          totalDelay = formatted.salutation.length * 120;
        }
        
        // é¡¯ç¤ºå…§å®¹
        const contentDiv = document.createElement('div');
        contentDiv.className = 'content';
        element.appendChild(contentDiv);
        
        let charIndex = 0;
        formatted.content.split('').forEach((char) => {
          if (char === '\n') {
            contentDiv.appendChild(document.createElement('br'));
          } else {
            const span = document.createElement('span');
            span.className = 'char';
            span.textContent = char;
            contentDiv.appendChild(span);
            
            setTimeout(() => {
              span.style.animation = 'penStroke 0.4s cubic-bezier(0.22, 1, 0.36, 1) forwards';
            }, totalDelay + (charIndex * 120));
            
            charIndex++;
          }
        });
        
        return totalDelay + (charIndex * 120);
      }

      // ========== è¤‡è£½åˆ°å‰ªè²¼æ¿ ==========
      async function copyToClipboard(text) {
        try {
          if (navigator.clipboard && navigator.clipboard.writeText) {
            await navigator.clipboard.writeText(text);
          } else {
            // é™ç´šæ–¹æ¡ˆ
            const textArea = document.createElement('textarea');
            textArea.value = text;
            textArea.style.position = 'fixed';
            textArea.style.left = '-999999px';
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            document.execCommand('copy');
            document.body.removeChild(textArea);
          }
          
          // é¡¯ç¤ºæˆåŠŸæç¤º
          copyToast.classList.add('show');
          setTimeout(() => {
            copyToast.classList.remove('show');
          }, 2000);
        } catch (err) {
          console.error('è¤‡è£½å¤±æ•—:', err);
          alert('è¤‡è£½å¤±æ•—,è«‹æ‰‹å‹•è¤‡è£½');
        }
      }

      // ========== é¡¯ç¤ºç¶“æ–‡ ==========
      function showVerse() {
        try {
          if (nfcPanel) nfcPanel.style.display = 'none';
          loader.style.display = 'flex';
          verseBox.style.display = 'none';

          const index = getDailyIndex();
          const currentVerse = verses[index];
          
          if (!currentVerse) {
            throw new Error('ç„¡æ³•è¼‰å…¥ç¶“æ–‡æ•¸æ“š');
          }
          
          console.log('é¡¯ç¤ºç¶“æ–‡ç´¢å¼•:', index, currentVerse);
          
          const verseElement = document.getElementById('verse');
          const refElement = document.getElementById('reference');
          
          // æ¸…ç©ºå…§å®¹
          verseElement.innerHTML = '';
          refElement.textContent = '';
          refElement.style.opacity = '0';
          
          // æº–å‚™åˆ†äº«æ–‡æœ¬
          const shareText = `${currentVerse.text}\n\n${currentVerse.ref}`;
          const encodedText = encodeURIComponent(shareText);
          
          // è¨­ç½®åˆ†äº«æŒ‰éˆ•
          document.getElementById('share-line').href = 
            `https://line.me/R/msg/text/?${encodedText}`;
          document.getElementById('share-fb').href = 
            `https://www.facebook.com/sharer/sharer.php?quote=${encodedText}`;
          
          // è¨­ç½®è¤‡è£½æŒ‰éˆ•
          copyBtn.onclick = () => copyToClipboard(shareText);

          // é¡¯ç¤ºå®¹å™¨ä¸¦é–‹å§‹å‹•ç•«
          setTimeout(() => {
            loader.style.display = 'none';
            verseBox.style.display = 'block';
            
            const animationDuration = animateLetterWriting(verseElement, currentVerse.text);
            
            // ç¶“æ–‡å‡ºè™•å»¶é²é¡¯ç¤º
            setTimeout(() => {
              refElement.textContent = currentVerse.ref;
              refElement.style.animation = 'fadeIn 0.6s ease-out forwards';
              document.querySelector('.share-buttons').style.animation = 'fadeIn 0.6s ease-out forwards';
            }, animationDuration + 500);
          }, 300);
        } catch (error) {
          console.error("é¡¯ç¤ºç¶“æ–‡æ™‚å‡ºéŒ¯:", error);
          loader.innerHTML = "è¼‰å…¥å¤±æ•—,è«‹åˆ·æ–°é é¢<br><small>éŒ¯èª¤: " + error.message + "</small>";
          loader.style.color = '#ff6b6b';
          verseBox.style.display = 'none';
        }
      }

      // ========== NFC åŠŸèƒ½åˆå§‹åŒ– ==========
      function initNFC() {
        if (!isAndroid) {
          showVerse();
          return;
        }

        if (!('NDEFReader' in window)) {
          nfcError.textContent = 'è«‹ä½¿ç”¨ Chrome ç€è¦½å™¨ä»¥ç²å¾— NFC åŠŸèƒ½';
          setTimeout(showVerse, 2500);
          return;
        }

        const ndef = new NDEFReader();
        let nfcTimeout;
        let alreadyRead = false;
        
        // 10ç§’è¶…æ™‚
        nfcTimeout = setTimeout(() => {
          if (!alreadyRead) {
            nfcError.textContent = 'æƒæè¶…æ™‚,è‡ªå‹•é¡¯ç¤ºç¶“æ–‡';
            setTimeout(showVerse, 1500);
          }
        }, 10000);

        ndef.scan()
          .then(() => {
            console.log('NFC æƒæå·²å•Ÿå‹•');
            
            ndef.addEventListener('reading', ({ message }) => {
              if (alreadyRead) return;
              alreadyRead = true;
              
              clearTimeout(nfcTimeout);
              console.log('NFC æ¨™ç±¤å·²è®€å–:', message);
              showVerse();
              
              // åœæ­¢ NFC æƒæ
              setTimeout(() => {
                try { 
                  ndef.stop(); 
                } catch(e) { 
                  console.log("NFC æ­£å¸¸çµæŸ"); 
                }
              }, 500);
            });
            
            ndef.addEventListener('readingerror', (error) => {
              if (!alreadyRead) {
                clearTimeout(nfcTimeout);
                console.error('NFC è®€å–éŒ¯èª¤:', error);
                nfcError.textContent = 'è®€å–å¤±æ•—,è«‹é‡è©¦';
                setTimeout(showVerse, 2000);
              }
            });
          })
          .catch(err => {
            clearTimeout(nfcTimeout);
            console.error("NFC å•Ÿå‹•éŒ¯èª¤:", err);
            
            if (err.name === 'NotAllowedError') {
              nfcError.textContent = 'è«‹å…è¨± NFC æ¬Šé™';
            } else {
              nfcError.textContent = 'NFC åŠŸèƒ½ä¸å¯ç”¨';
            }
            
            setTimeout(showVerse, 2000);
          });
      }

      // ========== äº‹ä»¶ç›£è½ ==========
      skipNfcBtn.addEventListener('click', () => {
        showVerse();
      });

      // ========== åˆå§‹åŒ–æ‡‰ç”¨ ==========
      if (isAndroid) {
        try {
          if ('NDEFReader' in window) {
            nfcPanel.style.display = 'flex';
            verseBox.style.display = 'none';
            initNFC();
          } else {
            showVerse();
          }
        } catch (err) {
          console.warn("NFC åˆå§‹åŒ–å¤±æ•—:", err);
          nfcError.textContent = 'NFC åˆå§‹åŒ–å¤±æ•—';
          setTimeout(showVerse, 1500);
        }
      } else {
        // é Android è¨­å‚™ç›´æ¥é¡¯ç¤ºç¶“æ–‡
        showVerse();
      }
    });
  </script>
</body>
</html>
